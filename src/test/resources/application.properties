
logging.level.root=debug

############################# mybatis configuration #############################
mybatis.configuration.use-actual-param-name=true


decorator.datasource.enabled=true
decorator.datasource.p6spy.enable-logging=true
decorator.datasource.p6spy.logging=sysout
decorator.datasource.p6spy.custom-appender-class=com.p6spy.engine.spy.appender.StdoutLogger
decorator.datasource.p6spy.log-format=P6SPY: connectionId:%(connectionId) | executionTime:%(executionTime) | sql:%(sqlSingleLine)

############################# routing configuration #############################
devx.routing.dataSources[0].name=write_0
devx.routing.dataSources[0].type=READ_WRITE
devx.routing.dataSources[0].weight=99
devx.routing.dataSources[0].dataSourceClass=com.zaxxer.hikari.HikariDataSource
#devx.routing.dataSources[0].properties.driverClassName=org.h2.Driver
devx.routing.dataSources[0].properties.jdbcUrl=jdbc:h2:mem:~/test1;FILE_LOCK=SOCKET;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=TRUE;AUTO_RECONNECT=TRUE;IGNORECASE=TRUE;
devx.routing.dataSources[0].properties.username=sa
devx.routing.dataSources[0].properties.password=
devx.routing.dataSources[0].properties.minIdle=6
devx.routing.dataSources[0].properties.maxPoolSize=30
devx.routing.dataSources[0].properties.connectionTimeout=30000
devx.routing.dataSources[0].properties.isAutoCommit=false
devx.routing.dataSources[0].properties.isReadOnly=false

devx.routing.dataSources[1].name=read_0
devx.routing.dataSources[1].type=READ
devx.routing.dataSources[1].weight=6
devx.routing.dataSources[1].dataSourceClass=com.zaxxer.hikari.HikariDataSource
#devx.routing.dataSources[1].driverClassName=org.h2.Driver
devx.routing.dataSources[1].properties.jdbcUrl=jdbc:h2:mem:~/test2;FILE_LOCK=SOCKET;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=TRUE;AUTO_RECONNECT=TRUE;IGNORECASE=TRUE;
devx.routing.dataSources[1].properties.username=sa
devx.routing.dataSources[1].properties.password=
devx.routing.dataSources[1].properties.minIdle=10
devx.routing.dataSources[1].properties.maxPoolSize=30
devx.routing.dataSources[1].properties.connectionTimeout=40000
devx.routing.dataSources[1].properties.isAutoCommit=false
devx.routing.dataSources[1].properties.isReadOnly=true

devx.routing.dataSources[2].name=read_1
devx.routing.dataSources[2].type=READ
devx.routing.dataSources[2].weight=10
devx.routing.dataSources[2].dataSourceClass=com.zaxxer.hikari.HikariDataSource
#devx.routing.dataSources[2].properties.driverClassName=org.h2.Driver
devx.routing.dataSources[2].properties.jdbcUrl=jdbc:h2:mem:~/test3;FILE_LOCK=SOCKET;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=TRUE;AUTO_RECONNECT=TRUE;IGNORECASE=TRUE;
devx.routing.dataSources[2].properties.username=sa
devx.routing.dataSources[2].properties.password=
devx.routing.dataSources[2].properties.minIdle=15
devx.routing.dataSources[2].properties.maxPoolSize=30
devx.routing.dataSources[2].properties.connectionTimeout=60000
devx.routing.dataSources[2].properties.isAutoCommit=false
devx.routing.dataSources[2].properties.isReadOnly=true

devx.routing.masters[0]=write_0
devx.routing.replicas[0]=read_0
devx.routing.replicas[1]=read_1

# table routing rule
devx.routing.rules.tables.employee.write_0.sqlTypes[0]=INSERT
devx.routing.rules.tables.employee.write_0.sqlTypes[1]=UPDATE
devx.routing.rules.tables.employee.write_0.sqlTypes[2]=DELETE
devx.routing.rules.tables.employee.write_0.sqlTypes[3]=OTHER

devx.routing.rules.tables.employee.read_0.sqlTypes[0]=SELECT
devx.routing.rules.tables.employee.read_1.sqlTypes[0]=SELECT
