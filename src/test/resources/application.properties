
logging.level.root=debug

############################# mybatis configuration #############################
mybatis.configuration.use-actual-param-name=true

############################# routing configuration #############################
sql.routing.dataSources[0].name=write_0
sql.routing.dataSources[0].type=READ_WRITE
sql.routing.dataSources[0].weight=99
sql.routing.dataSources[0].dataSourceClass=com.zaxxer.hikari.HikariDataSource
#sql.routing.dataSources[0].props.driverClassName=org.h2.Driver
sql.routing.dataSources[0].props.jdbcUrl=jdbc:h2:mem:~/test1;FILE_LOCK=SOCKET;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=TRUE;AUTO_RECONNECT=TRUE;IGNORECASE=TRUE;
sql.routing.dataSources[0].props.username=sa
sql.routing.dataSources[0].props.password=
sql.routing.dataSources[0].props.minIdle=6
sql.routing.dataSources[0].props.maxPoolSize=30
sql.routing.dataSources[0].props.connectionTimeout=30000
sql.routing.dataSources[0].props.isAutoCommit=false
sql.routing.dataSources[0].props.isReadOnly=false

sql.routing.dataSources[1].name=read_0
sql.routing.dataSources[1].type=READ
sql.routing.dataSources[1].weight=6
sql.routing.dataSources[1].dataSourceClass=com.zaxxer.hikari.HikariDataSource
#sql.routing.dataSources[1].props.driverClassName=org.h2.Driver
sql.routing.dataSources[1].props.jdbcUrl=jdbc:h2:mem:~/test2;FILE_LOCK=SOCKET;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=TRUE;AUTO_RECONNECT=TRUE;IGNORECASE=TRUE;
sql.routing.dataSources[1].props.username=sa
sql.routing.dataSources[1].props.password=
sql.routing.dataSources[1].props.minIdle=10
sql.routing.dataSources[1].props.maxPoolSize=30
sql.routing.dataSources[1].props.connectionTimeout=40000
sql.routing.dataSources[1].props.isAutoCommit=false
sql.routing.dataSources[1].props.isReadOnly=true

sql.routing.dataSources[2].name=read_1
sql.routing.dataSources[2].type=READ
sql.routing.dataSources[2].weight=10
sql.routing.dataSources[2].dataSourceClass=com.zaxxer.hikari.HikariDataSource
#sql.routing.dataSources[2].props.driverClassName=org.h2.Driver
sql.routing.dataSources[2].props.jdbcUrl=jdbc:h2:mem:~/test3;FILE_LOCK=SOCKET;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=TRUE;AUTO_RECONNECT=TRUE;IGNORECASE=TRUE;
sql.routing.dataSources[2].props.username=sa
sql.routing.dataSources[2].props.password=
sql.routing.dataSources[2].props.minIdle=15
sql.routing.dataSources[2].props.maxPoolSize=30
sql.routing.dataSources[2].props.connectionTimeout=60000
sql.routing.dataSources[2].props.isAutoCommit=false
sql.routing.dataSources[2].props.isReadOnly=true

sql.routing.masters[0]=write_0
sql.routing.replicas[0]=read_0
sql.routing.replicas[1]=read_1

# table routing rule
sql.routing.rules.tables.employee.write_0.sqlTypes[0]=INSERT
sql.routing.rules.tables.employee.write_0.sqlTypes[1]=UPDATE
sql.routing.rules.tables.employee.write_0.sqlTypes[2]=DELETE
sql.routing.rules.tables.employee.write_0.sqlTypes[3]=OTHER

sql.routing.rules.tables.employee.read_0.sqlTypes[0]=SELECT
sql.routing.rules.tables.employee.read_1.sqlTypes[0]=SELECT
